apiVersion: v1
kind: ConfigMap
metadata:
  name: magento2-configmap-{{ .Release.Name }}
  labels:
    cd-hipay: cron-delete
data:
  # Magento env var
  MAGENTO_HOST: {{ .Values.magento2_url }}
  MAGENTO_EXTERNAL_HTTP_PORT_NUMBER: "80"
  MAGENTO_EXTERNAL_HTTPS_PORT_NUMBER: "443"
  MAGENTO_DATABASE_HOST: magento2-mysql-{{ .Release.Name }}
  MAGENTO_DATABASE_PORT_NUMBER: "3306"
  MAGENTO_DATABASE_USER: bn_magento
  MAGENTO_DATABASE_NAME: bitnami_magento
  MAGENTO_DATABASE_PASSWORD: ""
  MAGENTO_USERNAME: demo
  MAGENTO_PASSWORD: hipay123
  MAGENTO_EMAIL: demo@hipay.com
  MAGENTO_MODE: developer
  ELASTICSEARCH_HOST: magento2-elastic-{{ .Release.Name }}
  ELASTICSEARCH_PORT_NUMBER: "9200"
  MAGENTO_ELASTICSEARCH_USER: ""
  MAGENTO_ELASTICSEARCH_PASSWORD: ""
  PHP_ENABLE_OPCACHE: "false"
  # MariaDB env var
  MARIADB_DATABASE: bitnami_magento
  MARIADB_USER: bn_magento
  ALLOW_EMPTY_PASSWORD: "yes"
  # Auth env var
  GITHUB_API_TOKEN: {{ .Values.github_api_token }}
  GITLAB_API_TOKEN: {{ .Values.gitlab_api_token }}
  # HiPay env var
  ENVIRONMENT: production
  ACTIVE_METHODS: hipay_hosted_fields,hipay_hosted
  HIPAY_API_USER_TEST: {{ .Values.hipay_api_user_test }}
  HIPAY_API_PASSWORD_TEST: {{ .Values.hipay_api_password_test }}
  HIPAY_SECRET_PASSPHRASE_TEST: {{ .Values.hipay_secret_passphrase_test }}
  HIPAY_TOKENJS_USERNAME_TEST: {{ .Values.hipay_tokenjs_username_test }}
  HIPAY_TOKENJS_PUBLICKEY_TEST: {{ .Values.hipay_tokenjs_publickey_test }}
  HIPAY_APPLEPAY_USERNAME_TEST: {{ .Values.hipay_applepay_username_test }}
  HIPAY_APPLEPAY_PASSWORD_TEST: {{ .Values.hipay_applepay_password_test }}
  HIPAY_APPLEPAY_SECRET_PASSPHRASE_TEST: {{ .Values.hipay_applepay_secret_passphrase_test }}
  HIPAY_APPLEPAY_TOKENJS_USERNAME_TEST: {{ .Values.hipay_applepay_tokenjs_username_test }}
  HIPAY_APPLEPAY_TOKENJS_PUBLICKEY_TEST: {{ .Values.hipay_applepay_tokenjs_publickey_test }}
  PI_DATA_URL: {{ .Values.pi_data_url }}
  # Modules env var
  CUSTOM_REPOSITORIES: vcs https://github.com/hipay/hipay-fullservice-sdk-magento2.git,vcs https://github.com/hipay/hipay-fullservice-sdk-php.git
  CUSTOM_PACKAGES: hipay/hipay-fullservice-sdk-magento2:dev-{{ .Values.branch }},giggsey/libphonenumber-for-php
  CUSTOM_MODULES: HiPay_FullserviceMagento
  # Elastic Search env var
  keys: |
    cluster.name=docker-cluster
    discovery.type=single-node
    'ES_JAVA_OPTS=-Xms512m -Xmx512m'
    http.port=9200
